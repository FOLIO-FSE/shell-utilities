# Extracts custom properties for licenses from FOLIO tenant
# and prints them in tab-delimited format
#
# usage: ./licenses-custprops
#
tenant=$(cat tenant)
okapi_url=$(cat okapi.url)
okapi_token=$(cat okapi.token)

apicall=$(curl -s -w '\n' -X GET \
  -H "Accept: application/json" \
  -H "X-Okapi-Tenant: ${tenant}" \
  -H "x-okapi-token: ${okapi_token}" \
  ${okapi_url}/licenses/custprops)

echo "${apicall}" | jq -r '.[] |[.name, .description, ([ .category.values[]?.value ] |join(";") ) ] | @tsv' 


